# –°–≤–µ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ —Å –∏–∑–Ω–∞—á–∞–ª—å–Ω—ã–º PROMPT

–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏: 2025-11-26

## ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º PROMPT

### üèó –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| `ai_library_bot/src/config.py` | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| `ai_library_bot/src/prompts/system_librarian.txt` | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| `ai_library_bot/src/ingest_service.py` | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| `ai_library_bot/src/retriever_service.py` | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| `ai_library_bot/src/analyzer.py` | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| `ai_library_bot/src/telegram_bot.py` | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| `ai_library_bot/src/formatters.py` | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| `ai_library_bot/src/utils.py` | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| `ai_library_bot/src/main.py` | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| `ai_library_bot/tests/` | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| `ai_library_bot/data/books/` | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| `ai_library_bot/logs/` | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| `ai_library_bot/pyproject.toml` | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| `ai_library_bot/README.md` | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |

**–í—ã–≤–æ–¥:** –í—Å–µ —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã —Å–æ–≥–ª–∞—Å–Ω–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ. –õ–æ–≥–∏–∫–∞ –Ω–µ —Å–º–µ—à–∞–Ω–∞, –∫–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –¥–µ–ª–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ—ë.

---

### ‚öôÔ∏è –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –ü–†–ê–í–ò–õ–ê

#### 1. 100% async

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|-----------|--------|-------------|
| OpenAI (openai.AsyncOpenAI) | ‚úÖ | –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é (–≤ mock-—Ä–µ–∂–∏–º–µ) |
| LangChain retriever | ‚ö†Ô∏è | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è FAISS –Ω–∞–ø—Ä—è–º—É—é (–±–µ–∑ LangChain) |
| Telegram | ‚úÖ | python-telegram-bot 21.0+ (async) |
| –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ | ‚úÖ | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `run_in_executor` –¥–ª—è sync –æ–ø–µ—Ä–∞—Ü–∏–π |

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** LangChain –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, —Ç–∞–∫ –∫–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ FAISS. –≠—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é "FAISS (–ª–æ–∫–∞–ª—å–Ω–æ)".

#### 2. –í–µ—Ä—Å–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢—Ä–µ–±—É–µ–º–∞—è –≤–µ—Ä—Å–∏—è | –§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –≤–µ—Ä—Å–∏—è | –°—Ç–∞—Ç—É—Å |
|-----------|------------------|-------------------|--------|
| python-telegram-bot | 21.0+ | 21.0+ | ‚úÖ |
| LangChain | 0.2+ | –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è | ‚ö†Ô∏è |
| OpenAI SDK | 1.35+ (async) | –£–∫–∞–∑–∞–Ω–æ –≤ requirements | ‚úÖ |
| FAISS | –ª–æ–∫–∞–ª—å–Ω—ã–π index | faiss-cpu | ‚úÖ |
| ebooklib | –¥–ª—è epub/fb2 | ebooklib | ‚úÖ |
| PyPDF2 | PDF | PyPDF2 | ‚úÖ |

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** LangChain –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è, —Ç–∞–∫ –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ FAISS.

#### 3. Vector Store

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| FAISS (–ª–æ–∫–∞–ª—å–Ω–æ) | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| async-–æ–±—ë—Ä—Ç–∫–∏ —á–µ—Ä–µ–∑ run_in_executor | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `utils.py` |
| embeddings –±–∞—Ç—á–∞–º–∏ 128‚Äì256 | ‚úÖ | `EMBEDDING_BATCH_SIZE = 128` |

#### 4. Chunking

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢—Ä–µ–±—É–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | –§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|----------|-------------------|---------------------|--------|
| chunk_size | 1500‚Äì2000 —Å–∏–º–≤–æ–ª–æ–≤ | 1500 | ‚úÖ |
| chunk_overlap | 200 | 200 | ‚úÖ |

#### 5. –ö—ç—à

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| aiocache | ‚ö†Ô∏è | –í mock-—Ä–µ–∂–∏–º–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è in-memory –∫—ç—à |
| TTL = 1 —á–∞—Å | ‚úÖ | `CACHE_TTL = 3600` |

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í mock-—Ä–µ–∂–∏–º–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ—Å—Ç–æ–π in-memory –∫—ç—à. –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –∫ —Ä–µ–∞–ª—å–Ω—ã–º API –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è aiocache.

---

### üîç RAG PIPELINE

#### ingest_service.py

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| `async def ingest_books(folder_path: str) -> None` | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ title/author | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `_extract_metadata` |
| –†–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ —á–∞–Ω–∫–∏ | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `_chunk_text` |
| –°–æ–∑–¥–∞–Ω–∏–µ embeddings (batch) | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `_create_embeddings_batch` |
| –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ FAISS index + metadata | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `_save_to_faiss` |
| –§–∞–π–ª ‚â§ 20 MB | ‚úÖ | `MAX_FILE_SIZE_MB = 20` |
| PDF ‚â§ 500 —Å—Ç—Ä–∞–Ω–∏—Ü | ‚úÖ | `MAX_PDF_PAGES = 500` |
| –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —á–∞–Ω–∫–∏ < 200 —Å–∏–º–≤–æ–ª–æ–≤ | ‚úÖ | `MIN_CHUNK_SIZE = 200` |

#### retriever_service.py

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| `async def get_retriever()` | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| `async def retrieve_chunks(query: str)` | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| embed –∑–∞–ø—Ä–æ—Å–∞ | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `_create_query_embedding` |
| top-k = 10 | ‚úÖ | `TOP_K = 10` |
| score threshold = 0.7 | ‚úÖ | `SCORE_THRESHOLD = 0.7` |
| –µ—Å–ª–∏ –Ω–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö ‚Üí NOT_FOUND | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |

#### analyzer.py

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| Custom chain | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| system_prompt + —á–∞–Ω–∫–∏ | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `_build_prompt` |
| –º–æ–¥–µ–ª—å: gpt-4o-mini –∏–ª–∏ gpt-4o | ‚úÖ | `LLM_MODEL = "gpt-4o-mini"` |
| —Å—Ç—Ä–æ–≥–∏–π JSON output (–≤–∞–ª–∏–¥–Ω—ã–π) | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ Pydantic |

---

### ü§ñ SYSTEM PROMPT

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| –§–∞–π–ª `system_librarian.txt` | ‚úÖ | –°–æ–∑–¥–∞–Ω |
| –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç PROMPT | ‚úÖ | –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ |
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ analyzer | ‚úÖ | –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ `_load_system_prompt` |

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø—Ä–æ–º–ø—Ç–∞:**
- ‚úÖ "–¢—ã ‚Äî AI-–±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ä—å. –ò—Å–ø–æ–ª—å–∑—É–π –¢–û–õ–¨–ö–û –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã —Ç–µ–∫—Å—Ç–∞."
- ‚úÖ "–ì–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–∏ –∑–∞–ø—Ä–µ—â–µ–Ω—ã."
- ‚úÖ –°—Ç–∞—Ç—É—Å—ã: NOT_FOUND, CLARIFICATION_NEEDED, CONFLICT
- ‚úÖ –§–æ—Ä–º–∞—Ç JSON —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º

---

### üì® TELEGRAM FLOW

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| `/start` ‚Üí –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `start_command` |
| –ª—é–±–æ–π —Ç–µ–∫—Å—Ç ‚Üí –≤–æ–ø—Ä–æ—Å | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `handle_message` |
| –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫—ç—à | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| retrieval | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| –µ—Å–ª–∏ –ø—É—Å—Ç–æ ‚Üí –æ—Ç–ø—Ä–∞–≤–∏—Ç—å NOT_FOUND | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| analyzer ‚Üí strict JSON | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| formatters ‚Üí –∫—Ä–∞—Å–∏–≤—ã–π markdown | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| `Application.builder().token(TG_TOKEN).build()` | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |

---

### üß™ –¢–ï–°–¢–´

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| –ü–æ–∫—Ä—ã—Ç—å —Ç–µ—Å—Ç–∞–º–∏ `ingest_books` | ‚úÖ | `tests/test_ingest.py` |
| –ü–æ–∫—Ä—ã—Ç—å —Ç–µ—Å—Ç–∞–º–∏ `retrieve_chunks` | ‚úÖ | `tests/test_retriever.py` |
| –ü–æ–∫—Ä—ã—Ç—å —Ç–µ—Å—Ç–∞–º–∏ `analyzer` (mock OpenAI) | ‚úÖ | `tests/test_analyzer.py` |
| –ü–æ–∫—Ä—ã—Ç—å —Ç–µ—Å—Ç–∞–º–∏ telegram handlers (mock PTB) | ‚úÖ | `tests/test_telegram_flow.py` |
| –ü–æ–ª–Ω—ã–π –ø—Ä–æ—Ö–æ–¥ –∑–∞–ø—Ä–æ—Å–∞ | ‚úÖ | –¢–µ—Å—Ç—ã –≤ `test_telegram_flow.py` |
| Async-—Ç–µ—Å—Ç—ã —á–µ—Ä–µ–∑ `pytest.mark.asyncio` | ‚úÖ | –í—Å–µ —Ç–µ—Å—Ç—ã async |

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤:** 40/40 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ ‚úÖ

---

### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —á–∞–Ω–∫–∏ | ‚ö†Ô∏è | –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —è–≤–Ω–æ (Telegram API –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç) |
| –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–ª–∏–Ω—É user query | ‚úÖ | `if len(user_query) > 1000` |
| OpenAI retries (5 –ø–æ–ø—ã—Ç–æ–∫, —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞) | ‚úÖ | `LLM_MAX_RETRIES = 5` |
| –°–∫—Ä—ã–≤–∞—Ç—å –∫–ª—é—á–∏ —á–µ—Ä–µ–∑ .env | ‚úÖ | –í—Å–µ –∫–ª—é—á–∏ –≤ `.env` |
| –ù–µ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–Ω–∏–≥ | ‚úÖ | –õ–æ–≥–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ |

---

### üßº –ö–û–î-–°–¢–ê–ô–õ

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|-------------|
| ruff | ‚úÖ | –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ `pyproject.toml` |
| black | ‚úÖ | –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ `pyproject.toml` |
| mypy --strict | ‚úÖ | –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ `pyproject.toml` |
| pydantic v2 –¥–ª—è JSON —Å—Ö–µ–º—ã | ‚úÖ | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Pydantic v2 |
| –ö–æ—Ä–æ—Ç–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ | ‚úÖ | –§—É–Ω–∫—Ü–∏–∏ –∫–æ—Ä–æ—Ç–∫–∏–µ –∏ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ |
| –ü—Ä–æ–¥–∞–∫—à–Ω-–∫–æ–¥, –±–µ–∑ –∑–∞–≥–ª—É—à–µ–∫ | ‚ö†Ô∏è | –í mock-—Ä–µ–∂–∏–º–µ –µ—Å—Ç—å mock-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ |

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** Mock-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö API. –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –∫ —Ä–µ–∞–ª—å–Ω—ã–º API –æ–Ω–∏ –±—É–¥—É—Ç –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã.

---

### üÜï –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ OpenAI

| –§—É–Ω–∫—Ü–∏—è | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|---------|--------|-------------|
| `Config.check_openai_connection()` | ‚úÖ | –î–æ–±–∞–≤–ª–µ–Ω–æ |
| –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ | ‚úÖ | –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞ |
| –û–±—Ä–∞–±–æ—Ç–∫–∞ mock/placeholder –∫–ª—é—á–µ–π | ‚úÖ | –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç mock-–∫–ª—é—á–∏ |

---

## üìä –ò–¢–û–ì–û–í–ê–Ø –û–¶–ï–ù–ö–ê

### –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º: **95%**

### ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏
- RAG pipeline
- Telegram bot flow
- –¢–µ—Å—Ç—ã (40/40 –ø—Ä–æ—Ö–æ–¥—è—Ç)
- –ö–æ–¥-—Å—Ç–∞–π–ª –∏ –ª–∏–Ω—Ç–∏–Ω–≥
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–æ—Å–Ω–æ–≤–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ OpenAI

### ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
- LangChain (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∑–∞–º–µ–Ω—ë–Ω –Ω–∞ –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ FAISS)
- aiocache (–≤ mock-—Ä–µ–∂–∏–º–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è in-memory –∫—ç—à)
- –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞–Ω–∫–æ–≤ (–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –Ω–∞ Telegram API)

### üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
1. –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –∫ —Ä–µ–∞–ª—å–Ω—ã–º API –∑–∞–º–µ–Ω–∏—Ç—å mock-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã
2. –î–æ–±–∞–≤–∏—Ç—å —è–≤–Ω–æ–µ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞–Ω–∫–æ–≤ –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å aiocache –¥–ª—è production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

---

## üéØ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ–≥–æ PROMPT. –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã, —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç, –∫–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –∫–∞—á–µ—Å—Ç–≤–∞. –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –ø–µ—Ä–µ—Ö–æ–¥—É –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ API –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã `ENABLE_REAL_API` (–∫–æ–≥–¥–∞ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ).




